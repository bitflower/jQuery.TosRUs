(function(b){var a="tosrus",j="tos",i="2.1.2";if(b[a]){return}var h={},g={},e={},d={},c={};b[a]=function(k,m,l){this.$node=k;this.opts=m;this.conf=l;this.vars={};this.nodes={};this.slides={};this._init();return this};b[a].prototype={_init:function(){var k=this;this._complementOptions();this.vars.fixed=(this.opts.wrapper.target=="window");this.nodes.$wrpr=b('<div class="'+h.wrapper+'" />');this.nodes.$wrpr.addClass(this.vars.fixed?h.fixed:h.inline).addClass(h("fx-"+this.opts.effect)).addClass(h(this.opts.slides.scale)).addClass(this.opts.wrapper.classes);this.nodes.$wrpr.on(e.open+" "+e.close+" "+e.prev+" "+e.next+" "+e.slideTo,function(m){arguments=Array.prototype.slice.call(arguments);var m=arguments.shift(),l=m.type;m.stopPropagation();if(typeof k[l]=="function"){k[l].apply(k,arguments)}}).on(e.opening+" "+e.closing+" "+e.sliding+" "+e.loading+" "+e.loaded,function(l){l.stopPropagation()}).on(e.click,function(l){l.stopPropagation();k.nodes.$wrpr.toggleClass(h.hover)});if(b.fn.hammer&&b[a].support.touch){this.nodes.$wrpr.hammer().on(e.pinch,function(l){if(c.$body.hasClass(h.opened)){l.gesture.preventDefault();l.stopPropagation()}})}this._finalSetup()},open:function(k,m){var l=this;if(!this.vars.opened){if(this.vars.fixed){c.scrollPosition=c.$wndw.scrollTop();c.$body.addClass(h.opened);d.setViewportScale()}if(m){this.nodes.$wrpr.addClass(h.opening).trigger(e.opening,[k,m])}else{setTimeout(function(){l.nodes.$wrpr.addClass(h.opening).trigger(e.opening,[k,m])},5)}this.nodes.$wrpr.addClass(h.hover).addClass(h.opened)}this.vars.opened=true;this._loadContents();if(b.isNumeric(k)){m=(m||!this.vars.opened);this.slideTo(k,m)}},close:function(k){if(this.vars.opened){if(this.vars.fixed){c.$body.removeClass(h.opened)}if(k){this.nodes.$wrpr.removeClass(h.opened)}else{d.transitionend(this.nodes.$wrpr,function(){b(this).removeClass(h.opened)},this.conf.transitionDuration)}this.nodes.$wrpr.removeClass(h.hover).removeClass(h.opening).trigger(e.closing,[this.slides.index,k])}this.vars.opened=false},prev:function(k,l){if(!b.isNumeric(k)){k=this.opts.slides.slide}this.slideTo(this.slides.index-k,l)},next:function(k,l){if(!b.isNumeric(k)){k=this.opts.slides.slide}this.slideTo(this.slides.index+k,l)},slideTo:function(n,q){if(!this.vars.opened){return false}if(!b.isNumeric(n)){return false}var m=true;if(n<0){var l=(this.slides.index==0);if(this.opts.infinite){if(l){n=this.slides.total-this.slides.visible}else{n=0}}else{n=0;if(l){m=false}}}if(n+this.slides.visible>this.slides.total){var k=(this.slides.index+this.slides.visible>=this.slides.total);if(this.opts.infinite){if(k){n=0}else{n=this.slides.total-this.slides.visible}}else{n=this.slides.total-this.slides.visible;if(k){m=false}}}this.slides.index=n;this._loadContents();if(m){var p=0-(this.slides.index*this.opts.slides.width)+this.opts.slides.offset;if(this.slides.widthPercentage){p+="%"}if(q){this.nodes.$sldr.addClass(h.noanimation);d.transitionend(this.nodes.$sldr,function(){b(this).removeClass(h.noanimation)},5)}for(var o in b[a].effects){if(o==this.opts.effect){b[a].effects[o].call(this,p,q);break}}this.nodes.$wrpr.trigger(e.sliding,[n,q])}},_initAnchors:function(){var l=this,n=b();if(this.$node.is("a")){for(var k in b[a].media){n=n.add(this.$node.filter(function(){return b[a].media[k].filterAnchors.call(l,b(this).attr("href"))}))}}return n},_initSlides:function(){this[this.$node.is("a")?"_initSlidesFromAnchors":"_initSlidesFromContent"]();return this.nodes.$sldr.children().css("width",this.opts.slides.width+(this.slides.widthPercentage?"%":"px"))},_initSlidesFromAnchors:function(){var k=this;this.nodes.$anchors.each(function(l){var m=b(this);var n=b('<div class="'+h.slide+" "+h.loading+'" />').data(g.anchor,m).appendTo(k.nodes.$sldr);m.data(g.slide,n).on(e.click,function(o){o.preventDefault();k.open(l)})})},_initSlidesFromContent:function(){var k=this;this.$node.children().each(function(){var n=b(this);b('<div class="'+h.slide+'" />').append(n).appendTo(k.nodes.$sldr);for(var l in b[a].media){if(b[a].media[l].filterSlides.call(k,n)){b[a].media[l].initSlides.call(k,n);n.parent().addClass(h(l));break}}})},_loadContents:function(){var k=this;switch(this.opts.slides.load){case"all":this._loadContent(0,this.slides.total);break;case"visible":this._loadContent(this.slides.index,this.slides.index+this.slides.visible);break;case"near-visible":default:this._loadContent(this.slides.index,this.slides.index+this.slides.visible);setTimeout(function(){k._loadContent(k.slides.index-k.slides.visible,k.slides.index);k._loadContent(k.slides.index+k.slides.visible,k.slides.index+(k.slides.visible*2))},this.conf.transitionDuration);break}},_loadContent:function(m,k){var l=this;this.nodes.$slides.slice(m,k).each(function(){var q=b(this),o=false;if(q.children().length==0){var p=q.data(g.anchor).attr("href");for(var n in b[a].media){if(b[a].media[n].filterAnchors.call(l,p)){b[a].media[n].initAnchors.call(l,q,p);q.addClass(h(n));break}}q.trigger(e.loading,[q.data(g.anchor)])}})},_complementOptions:function(){if(typeof this.opts.wrapper.target=="undefined"){this.opts.wrapper.target=(this.$node.is("a"))?"window":this.$node}if(this.opts.wrapper.target!="window"){if(typeof this.opts.wrapper.target=="string"){this.opts.wrapper.target=b(this.opts.wrapper.target)}}this.opts.show=d.complBoolean(this.opts.show,this.opts.wrapper.target!="window");if(b.isNumeric(this.opts.slides.width)){this.slides.widthPercentage=false;this.opts.slides.visible=d.complNumber(this.opts.slides.visible,1)}else{var k=(d.isPercentage(this.opts.slides.width))?d.getPercentage(this.opts.slides.width):false;this.slides.widthPercentage=true;this.opts.slides.visible=d.complNumber(this.opts.slides.visible,(k)?Math.floor(100/k):1);this.opts.slides.width=(k)?k:Math.ceil(100*100/this.opts.slides.visible)/100}this.opts.slides.slide=d.complNumber(this.opts.slides.slide,this.opts.slides.visible);this.opts.slides.offset=(d.isPercentage(this.opts.slides.offset))?d.getPercentage(this.opts.slides.offset):d.complNumber(this.opts.slides.offset,0)},_finalSetup:function(){this.nodes.$sldr=b('<div class="'+h.slider+'" />').appendTo(this.nodes.$wrpr);this.nodes.$anchors=this._initAnchors();this.nodes.$slides=this._initSlides();this.slides.total=this.nodes.$slides.length;this.slides.visible=this.opts.slides.visible;this.slides.index=0;this.vars.opened=true;for(var k=0;k<b[a].addons.length;k++){if(b.isFunction(this["_addon_"+b[a].addons[k]])){this["_addon_"+b[a].addons[k]]()}}for(var l=0;l<b[a].ui.length;l++){if(this.nodes.$wrpr.find("."+h[b[a].ui[l]]).length){this.nodes.$wrpr.addClass(h("has-"+b[a].ui[l]))}}if(this.vars.fixed){this.nodes.$wrpr.appendTo(c.$body);this.close(true)}else{this.nodes.$wrpr.appendTo(this.opts.wrapper.target);if(this.opts.show){this.vars.opened=false;this.open(0,true)}else{this.close(true)}}},reinit:function(){this.$node=b(this.$node.selector);this.nodes.$wrpr.empty();this._finalSetup()}};b.fn[a]=function(o,n,k,m){if(!c.$wndw){f()}o=b.extend(true,{},b[a].defaults,o);o=b.extend(true,{},o,b[a].support.touch?k:n);m=b.extend(true,{},b[a].configuration,m);var l=new b[a](this,o,m);this.data(a,l);return l};b[a].support={touch:"ontouchstart" in window.document};b[a].defaults={infinite:false,effect:"slide",wrapper:{classes:""},slides:{offset:0,scale:"fit",load:"near-visible",visible:1}};b[a].configuration={transitionDuration:400};b[a].debug=function(k){};b[a].deprecated=function(l,k){if(typeof console!="undefined"&&typeof console.warn!="undefined"){console.warn(a+": "+l+" is deprecated, use "+k+" instead.")}};b[a].effects={slide:function(k){this.nodes.$sldr.css("left",k)},fade:function(k){d.transitionend(this.nodes.$sldr,function(){b(this).css("left",k).css("opacity",1)},this.conf.transitionDuration);this.nodes.$sldr.css("opacity",0)}};b[a].version=i;b[a].media={};b[a].addons=[];b[a].ui=[];function f(){h=function(k){return j+"-"+k};g=function(k){return j+"-"+k};e=function(k){return k+"."+j};b.each([h,g,e],function(k,l){l.add=function(n){n=n.split(" ");for(var m in n){l[n[m]]=l(n[m])}}});h.add("touch desktop scale-1 scale-2 scale-3 wrapper opened opening fixed inline hover slider slide loading noanimation fastanimation");g.add("slide anchor");e.add("open opening close closing prev next slideTo sliding click pinch scroll resize orientationchange load loading loaded transitionend webkitTransitionEnd");d={complObject:function(k,l){if(!b.isPlainObject(k)){k=l}return k},complBoolean:function(k,l){if(typeof k!="boolean"){k=l}return k},complNumber:function(k,l){if(!b.isNumeric(k)){k=l}return k},complString:function(k,l){if(typeof k!="string"){k=l}return k},isPercentage:function(k){return(typeof k=="string"&&k.slice(-1)=="%");k=parseInt(k.slice(0,-1));return !isNaN(k)},getPercentage:function(k){return parseInt(k.slice(0,-1))},resizeRatio:function(q,l,o,n,m){var k=l.width(),p=l.height();if(o&&k>o){k=o}if(n&&p>n){p=n}if(k/p<m){p=k/m}else{k=p*m}q.width(k).height(p)},transitionend:function(k,m,n){var l=false,o=function(){if(!l){m.call(k[0])}l=true};k.one(e.transitionend,o);k.one(e.webkitTransitionEnd,o);setTimeout(o,n*1.1)},setViewportScale:function(){if(c.viewportScale){var k=c.viewportScale.getScale();if(typeof k!="undefined"){k=1/k;c.$body.removeClass(h["scale-1"]).removeClass(h["scale-2"]).removeClass(h["scale-3"]).addClass(h["scale-"+Math.max(Math.min(Math.round(k),3),1)])}}}};c={$wndw:b(window),$html:b("html"),$body:b("body"),scrollPosition:0,viewportScale:null,viewportScaleInterval:null};c.$body.addClass(b[a].support.touch?h.touch:h.desktop);c.$wndw.on(e.scroll,function(k){if(c.$body.hasClass(h.opened)){window.scrollTo(0,c.scrollPosition);k.preventDefault();k.stopPropagation();k.stopImmediatePropagation()}});if(!c.viewportScale&&b[a].support.touch&&typeof FlameViewportScale!="undefined"){c.viewportScale=new FlameViewportScale();d.setViewportScale();c.$wndw.on(e.orientationchange+" "+e.resize,function(k){if(c.viewportScaleInterval){clearTimeout(c.viewportScaleInterval);c.viewportScaleInterval=null}c.viewportScaleInterval=setTimeout(function(){d.setViewportScale()},500)})}b[a]._c=h;b[a]._d=g;b[a]._e=e;b[a]._f=d;b[a]._g=c}})(jQuery);